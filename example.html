<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>A-Frame Dial Example</title>
    <meta name="description" content="Example using Dial Component for A-Frame WebXR">
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="dist/dial.js"></script>
    <script>
AFRAME.registerComponent('fluctuation', {
  init: function () {
    this.startRand = 0;
    this.endRand = 45;
  },
  tick: function (time) {
    this.startRand += (Math.random() - 0.41);
    this.endRand += (Math.random() - 0.4);
    const thetaStart = Math.cos(time/1500) * 20 + this.startRand;
    const thetaEnd = Math.sin(time/1000) * 20 + this.endRand;
    this.el.setAttribute('dial', 'thetaStart', thetaStart);
    this.el.setAttribute('dial', 'thetaEnd', thetaEnd);
  }
});
AFRAME.registerComponent('needle', {
  tick: function (time) {
    const thetaStart = time/1000*90;
    this.el.setAttribute('dial', 'thetaStart', thetaStart);
    this.el.setAttribute('dial', 'thetaEnd', thetaStart+1);
  }
});
    </script>
  </head>
  <body>
    <a-scene background="color: #ECECEC">
      <a-assets>
        <img id="bezel" src="./assets/bezel.png">
        <img id="metal" src="./assets/TexturesCom_MetalVarious0052_1_M.jpg">
      </a-assets>
      <a-plane position="0 1.5 -1.51" rotation="0 0 0" width="1.4" height="0.40" src="#metal">
        <a-entity position="-0.35 0 0.002" rotation="0 0 0"
                  dial="size:0.30; src:#bezel; radius:0.95; thetaStart:0; thetaEnd:45;"
                  fluctuation
        ></a-entity>
        <a-entity position="0.35 0 0.002" rotation="0 0 0" scale="1 1 1"
                  dial="size:0.30; src:#bezel; radius:0.95; thetaStart:10; thetaEnd:11; wedgeColor:white; backgroundColor:#444"
                  needle
        ></a-entity>
      </a-plane>
      <a-sphere position="0 1.25 -4" radius="1.25" color="#EF2D5E" shadow></a-sphere>

      <a-plane position="0 0 -3" rotation="-90 0 0" width="4" height="4" color="#7BC8A4" shadow></a-plane>
    </a-scene>
  </body>
</html>
